---
title: Async Data
tutorial: Basic PyWire
section: Control Flow
description: Handle loading states with {$await}.
files:
  - path: pages/index.wire
    initial: |
      ---
      import asyncio

      async def fetch_user_data():
        # Simulate a network request
        await asyncio.sleep(2)
        return "Alice Smith"
      ---
      <div class="profile-card">
        <h3>User Profile</h3>
        
        <!-- Add {$await} block here -->
        
      </div>
    solution: |
      ---
      import asyncio

      async def fetch_user_data():
        # Simulate a network request
        await asyncio.sleep(2)
        return "Alice Smith"

      ---
      <div class="profile-card">
        <h3>User Profile</h3>
        
        {$await fetch_user_data()}
          <p>Loading user...</p>
        {$then name}
          <p>Welcome, {name}!</p>
        {/await}
      </div>
successCriteria:
  - type: file_contains
    description: 'Use {$await} to call fetch_user_data()'
    target: pages/index.wire
    pattern: '{\$await fetch_user_data\(\)}'
  - type: browser_route_text
    route: '/'
    description: "Wait for 'Welcome, Alice Smith!' to appear"
    pattern: 'Welcome, Alice Smith!'
pagesDir: pages
---

PyWire makes working with asynchronous data easy. Instead of managing `is_loading` variables manually, you can use the `{$await}` block to handle Python coroutines directly in the template.

The block immediately renders the first section (Pending state), and automatically updates to the `{$then}` section when the data resolves.

### Your Task

1.  Call the `fetch_user_data()` function inside an `{$await}` block.
2.  Show `<p>Loading user...</p>` as the pending state.
3.  Add a `{$then name}` block to capture the result and display `Welcome, {name}!`.

#### Examples

**Fetching Data:**

```pywire
{$await api.get_profile(user_id)}
    <Spinner />
{$then profile}
    <ProfileCard user={profile} />
{$catch error}
    <p>Error: {error}</p>
{/await}
```
